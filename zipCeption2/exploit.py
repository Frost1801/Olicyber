import os
from pwn import *

filename = "flag"
u = log.progress("Unzipping")
p = log.progress("Password")
o = log.progress("Output")

clear = False

with open("correct.txt", "w") as correct:
    for i in range(100, 0, -1):
        u.status(str(i))
        with open("rockyou.txt", "r", encoding="latin-1") as f:
            for passwd in f:
                passwd = passwd.strip()
                output = os.system("unzip -P " + passwd + " \'" +  str(i) + ".zip\'")
                o.status(output)
                p.status(passwd)
                if output != 20992:
                    correct.write(passwd+ "\n")
                    #if (i != 100 and i != 1):
                        #os.system("rm " + str(i) + ".zip")
                    break
if (clear):
    open('correct.txt', 'w').close()
